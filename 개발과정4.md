# Amazon S3에 이미지 upload하기

참고

* [[YOUTUBE]Large File Uploads in Django & Amazon AWS S3 // Django + jQuery to upload to AWS S3](https://www.youtube.com/watch?v=CbB7UoPyErY)
  * https://www.codingforentrepreneurs.com/blog/large-file-uploads-with-amazon-s3-django/
* [ [AWS] S3 Bucket 생성하기](https://zamezzz.tistory.com/298?category=847391)

* [Django ImageField Upload를 AWS S3해보자](https://hjh5488.tistory.com/12)

* [[Deploy] Django 프로젝트 배포하기 - 7. Amazon S3](https://nachwon.github.io/django-deploy-7-s3/)



https://console.aws.amazon.com/s3/bucket/create?region=ap-northeast-2



### s3 버킷 만들기

[[YOUTUBE]Large File Uploads in Django & Amazon AWS S3 // Django + jQuery to upload to AWS S3](https://www.youtube.com/watch?v=CbB7UoPyErY)

* https://www.codingforentrepreneurs.com/blog/large-file-uploads-with-amazon-s3-django/

버킷, 그룹, 사용자 정책과 python config 파일 설정하는 것 까지만 참고할 것.



**why?**

- Response로 다음과 같은 에러 메시지를 받음. 

  > <Error><Code>InvalidRequest</Code>
  >
  > <Message>The authorization mechanism you have provided is not supported. Please use AWS4-HMAC-SHA256.</Message>
  >
  > ..

  * 서울 리전은 signitureV4. (해당 영상에서는 US West (Oregon)으로 v2 bucket 사용)

  * https://aws.amazon.com/ko/blogs/korea/amazon-s3-update-sigv2-deprecation-period-extended-modified/ 

- boto3를 이용해서 적용해보자.



### Django-S3 연결 (feat.boto3)

https://velog.io/@devzunky/TIL-no.83-AWS-Django-S3-multiple-file-Upload

boto3? s3 연결을 하기위해 aws에서 제공하는 S3 SDK
[AWS S3 이해하기 (Boto3 사용기)](https://m.blog.naver.com/PostView.nhn?blogId=happy_jhyo&logNo=221195197535&proxyReferer=https:%2F%2Fwww.google.com%2F)





문제 1)

원하는 대로 올라갔으나, 텅 빈 파일이다.

1.  ExtraArgs의 ContentType을 고쳐봤으나 소용없었다.
2.  TypeError at /api/events/img↵a bytes-like object is required

****

